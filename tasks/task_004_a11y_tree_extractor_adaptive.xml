<smartchrome_task id="004_adaptive" status="success">
  <context>
    We are building "SmartChrome", embedding a local VLM into Chromium. 
    Current Phase: Implementing the MOD_01_FRONTEND_ENGINE -> C_01_SENSOR. 
    CRITICAL ARCHITECTURE UPDATE: We are implementing an "Adaptive Polling / Backoff" mechanism. The sensor will check the A11y tree at a minimum 2-second interval. If the UI hasn't changed (comparing the JSON output), the cooldown increases incrementally up to a maximum of 10 seconds. If a change is detected, the cooldown instantly resets to 2 seconds.
  </context>

  <phase_1_project_management>
    <description>Save this optimized prompt to the SmartChrome GitHub repo.</description>
    <actions>
      <action>Save this entire XML prompt text into: `~/SmartChrome/tasks/task_004_a11y_tree_extractor_adaptive.xml`</action>
      <action>Change directory to `~/SmartChrome`.</action>
      <action>Execute: `git add tasks/task_004_a11y_tree_extractor_adaptive.xml`</action>
      <action>Execute: `git commit -m "task: implement adaptive A11y tree sensor with dynamic backoff cooldown"`</action>
      <action>Execute: `git push`</action>
    </actions>
  </phase_1_project_management>

  <phase_2_chromium_execution>
    <description>Create the smart C++ RenderFrameObserver with adaptive throttling.</description>
    <actions>
      <action>Change directory to your Chromium source tree (`~/chromium/src`).</action>
      
      <action>Create header file `components/vlm_agent/renderer/vlm_sensor.h`</action>
      <action>Create implementation file `components/vlm_agent/renderer/vlm_sensor.cc`</action>
      <action>Update build configurations in `components/vlm_agent/BUILD.gn`</action>
      <action>Execute build: `autoninja -C out/Default components/vlm_agent`</action>
    </actions>
  </phase_2_chromium_execution>

  <execution_log>
    Build Directory: out/Default
    Status: Succeeded
    Optimizations implemented:
      - Recursive AX tree traversal (TraverseAXNode).
      - Adaptive cooldown (2s minimum, 10s maximum).
      - JSON state comparison for backoff detection.
      - Fixed constructor initialization order.
      - Integrated Blink WebAXObject and gfx::Rect bounds.
    Object file verified: out/Default/obj/components/vlm_agent/renderer/vlm_sensor.o
  </execution_log>
</smartchrome_task>
